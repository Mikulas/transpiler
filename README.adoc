= Transpiler
:source-language: php

PHP source code transformations.

== What Is It Good For?

By transpiling code to older runtime versions you gain
many benefits of PHP 7.1 such as void return types and
optionals (which are mostly useful for static analysis),
but you are not forced to update production to unstable
bleeding-edge versions.

== Implemented AST modifiers:

=== PHP 7.1 -> 7.0

==== Remove void return types

```
function foo(): void
{
}

# -->

function foo()
{
}
```

__Limitations:__ `ReflectionFunctionAbstract::getReturnType()` and `hasReturnType()` will return `NULL` and `FALSE` respectively instead of original values.

==== Remove class constant visibilities

```
class Foo
{
    public const A = 'a';
    protected const B = 'b';
    private const C = 'c';
}

# -->

class Foo
{
    const A = 'a';
    const B = 'b';
    const C = 'c';
}
```

__Limitations:__ none

==== Rollout named assignment

```
['X' => ['A' => $a, 'B' => $b]] = ['X' => ['A' => 10, 'B' => 20]];
list('T' => list('U' => $u, 'V' => $v)) = ['T' => ['U' => 15, 'V' => 19]];

# -->

${'~transpiler-1'} = ['X' => ['A' => 10, 'B' => 20]];
$a = ${'~transpiler-1'}['X']['A'];
$b = ${'~transpiler-1'}['X']['B'];

${'~transpiler-2'} = ['T' => ['U' => 15, 'V' => 19]];
$u = ${'~transpiler-2'}['T']['U'];
$v = ${'~transpiler-2'}['T']['V'];

```

__Limitations:__ slightly worse performance, introduces new variable

=== Remove nullable return type

```
function sum(): ?int
{
}

# -->

function sum()
{
}
```

=== Rewrite nullable parameter

```
function sum(?int $a, ?int $b)
{
}

# -->

function sum(int $a = NULL, int $b = NULL)
{
}
```
